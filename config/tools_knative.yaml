# EdgeAgent Tools Configuration for Knative Deployment
#
# MCP servers are accessed via Knative internal DNS:
#   http://<service-name>.<namespace>.svc.cluster.local/mcp
#
# Storage: All file-based tools use shared PVC mounted at /edgeagent
#   /edgeagent/
#   ├── data/logs/        - log files for log_parser
#   ├── data/images/      - images for image_resize
#   ├── data/documents/   - general documents
#   ├── repos/            - git repositories
#   └── results/          - processing results

tools:
  # ==========================================================================
  # Official MCP Servers (via mcp-proxy)
  # ==========================================================================

  filesystem:
    profile:
      description: "Read, write, and search files on the filesystem"
      data_affinity: DEVICE
      compute_intensity: LOW
      data_flow: EXPANSION
      requires_cloud_api: false
      privacy_sensitive: false
    endpoints:
      DEVICE:
        transport: stdio
        command: mcp-server-filesystem
        args: ["/edgeagent"]
      EDGE:
        transport: streamable_http
        url: "http://mcp-filesystem.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-filesystem.edgeagent.svc.cluster.local/mcp"

  git:
    profile:
      description: "Git repository operations (diff, log, status)"
      data_affinity: DEVICE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.05
      requires_cloud_api: false
      privacy_sensitive: true
    endpoints:
      DEVICE:
        transport: stdio
        command: mcp-server-git
        args: []
      EDGE:
        transport: streamable_http
        url: "http://mcp-git.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-git.edgeagent.svc.cluster.local/mcp"

  time:
    profile:
      description: "Time operations and timezone conversion"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: TRANSFORM
      requires_cloud_api: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-time.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-time.edgeagent.svc.cluster.local/mcp"

  sequentialthinking:
    profile:
      description: "Step-by-step reasoning and thinking"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: EXPANSION
      requires_cloud_api: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-sequentialthinking.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-sequentialthinking.edgeagent.svc.cluster.local/mcp"

  # ==========================================================================
  # Custom FastMCP Servers
  # ==========================================================================

  fetch:
    profile:
      description: "Fetch and convert URL content to Markdown"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.1
      requires_cloud_api: false
      privacy_sensitive: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-fetch.edgeagent.svc.cluster.local/mcp"

  log_parser:
    profile:
      description: "Parse various log formats and extract structured data"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: REDUCTION
      reduction_ratio: 0.01
      requires_cloud_api: false
      privacy_sensitive: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-log-parser.edgeagent.svc.cluster.local/mcp"

  summarize:
    profile:
      description: "Text summarization using LLM API"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: REDUCTION
      reduction_ratio: 0.2
      requires_cloud_api: true
      privacy_sensitive: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-summarize.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-summarize.edgeagent.svc.cluster.local/mcp"

  data_aggregate:
    profile:
      description: "Aggregate, merge, and summarize structured data"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.01
      requires_cloud_api: false
      privacy_sensitive: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-data-aggregate.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-data-aggregate.edgeagent.svc.cluster.local/mcp"

  image_resize:
    profile:
      description: "Image resizing, thumbnails, and duplicate detection"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: REDUCTION
      reduction_ratio: 0.1
      requires_cloud_api: false
      privacy_sensitive: false
    endpoints:
      EDGE:
        transport: streamable_http
        url: "http://mcp-image-resize.edgeagent.svc.cluster.local/mcp"
      CLOUD:
        transport: streamable_http
        url: "http://mcp-image-resize.edgeagent.svc.cluster.local/mcp"

# ==========================================================================
# SubAgent Endpoints (for Orchestrator to call)
# ==========================================================================
subagents:
  EDGE:
    url: "http://edge-subagent.edgeagent.svc.cluster.local/execute"
  CLOUD:
    url: "http://cloud-subagent.edgeagent.svc.cluster.local/execute"

# ==========================================================================
# Static Mapping (default location for each tool)
# ==========================================================================
static_mapping:
  filesystem: DEVICE
  git: DEVICE
  time: EDGE
  sequentialthinking: EDGE
  fetch: EDGE
  log_parser: EDGE
  summarize: EDGE
  data_aggregate: EDGE
  image_resize: EDGE
