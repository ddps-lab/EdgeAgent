# EdgeAgent Tool Configuration - Scenario 3: Research Assistant Pipeline
#
# Tool Chain: (mock_search) -> fetch -> summarize -> data_aggregate -> filesystem
# Locations:  EDGE           EDGE    EDGE        EDGE             DEVICE
#
# Use Case: Research a topic, fetch articles, summarize, and generate report
#
# Note: This scenario uses pre-defined URLs instead of live search
# to avoid requiring BRAVE_API_KEY for testing

tools:
  # filesystem: 파일시스템 접근 (DEVICE에서 파일 쓰기)
  filesystem:
    profile:
      description: "Read, write, and search files on the filesystem"
      data_affinity: DEVICE
      compute_intensity: LOW
      data_flow: EXPANSION
      reduction_ratio: 10.0
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      DEVICE:
        transport: stdio
        command: mcp-server-filesystem
        args:
          - "/tmp/edgeagent_device"
        env: {}

  # fetch: URL에서 콘텐츠 가져오기 (웹 페이지를 마크다운으로 변환)
  fetch:
    profile:
      description: "Fetch URL content and convert to markdown"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: TRANSFORM
      reduction_ratio: 1.0
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "servers/fetch_server.py"
        env: {}

  # summarize: 텍스트 요약 (EDGE에서 처리, Cloud API 사용)
  summarize:
    profile:
      description: "Summarize text using LLM (OpenAI/Upstage)"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: REDUCTION
      reduction_ratio: 0.2
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "servers/summarize_server.py"
        env:
          SUMMARIZE_PROVIDER: "${SUMMARIZE_PROVIDER:-openai}"
          OPENAI_API_KEY: "${OPENAI_API_KEY}"

  # data_aggregate: 데이터 집계 및 병합
  data_aggregate:
    profile:
      description: "Aggregate, merge, and summarize structured data"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.1
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "servers/data_aggregate_server.py"
        env: {}


static_mapping:
  filesystem: DEVICE
  fetch: EDGE
  summarize: EDGE
  data_aggregate: EDGE
