# EdgeAgent Tool Configuration
#
# Multi-endpoint tool 설정 - 하나의 tool에 여러 location endpoint
# Middleware가 호출 시점에 적절한 location으로 routing

# ============================================================================
# Tools Configuration
# ============================================================================

tools:
  # ==========================================================================
  # filesystem: 파일시스템 접근 (DEVICE/EDGE/CLOUD 모두 배포)
  # ==========================================================================
  filesystem:
    profile:
      description: "Read, write, and search files on the filesystem"
      data_affinity: DEVICE          # 기본 선호 location
      compute_intensity: LOW          # 단순 I/O 작업
      data_flow: EXPANSION            # 파일 경로 → 파일 내용
      reduction_ratio: 10.0
      requires_cloud_api: false
      privacy_sensitive: false        # 각 location별 격리된 디렉토리 사용
      wasi_compatible: true
      requires_gpu: false

    # 3개 location에 동일한 filesystem MCP server 배포
    # 각 location은 서로 다른 디렉토리에만 접근 가능
    endpoints:
      DEVICE:
        transport: stdio
        command: npx
        args:
          - "-y"
          - "@modelcontextprotocol/server-filesystem"
          - "/tmp/edgeagent_device"
        env: {}

      EDGE:
        transport: stdio
        command: npx
        args:
          - "-y"
          - "@modelcontextprotocol/server-filesystem"
          - "/tmp/edgeagent_edge"
        env: {}

      CLOUD:
        transport: stdio
        command: npx
        args:
          - "-y"
          - "@modelcontextprotocol/server-filesystem"
          - "/tmp/edgeagent_cloud"
        env: {}


# ==========================================================================
  # slack: Cloud API 필수 tool (CLOUD에만 배포)
  # ==========================================================================
  slack:
    profile:
      description: "Slack messaging API"
      data_affinity: CLOUD
      compute_intensity: LOW
      requires_cloud_api: true       # Cloud API 필수 → 무조건 CLOUD
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      CLOUD:
        transport: stdio
        command: python
        args:
          - "scripts/mock_mcp_server.py"
          - "slack"
          - "--location"
          - "CLOUD"
        env: {}

  # ==========================================================================
  # credentials: Privacy sensitive tool (CLOUD 제외)
  # ==========================================================================
  credentials:
    profile:
      description: "Secure credential storage"
      data_affinity: DEVICE
      compute_intensity: LOW
      requires_cloud_api: false
      privacy_sensitive: true        # Privacy 민감 → CLOUD 제외
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      DEVICE:
        transport: stdio
        command: python
        args:
          - "scripts/mock_mcp_server.py"
          - "credentials"
          - "--location"
          - "DEVICE"
        env: {}

      EDGE:
        transport: stdio
        command: python
        args:
          - "scripts/mock_mcp_server.py"
          - "credentials"
          - "--location"
          - "EDGE"
        env: {}

  # ==========================================================================
  # compute: GPU 연산 tool (CLOUD 선호, EDGE도 가능)
  # ==========================================================================
  compute:
    profile:
      description: "GPU-accelerated compute operations"
      data_affinity: CLOUD
      compute_intensity: HIGH
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: false
      requires_gpu: true             # GPU 필수 → CLOUD 또는 EDGE

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "scripts/mock_mcp_server.py"
          - "compute"
          - "--location"
          - "EDGE"
        env: {}

      CLOUD:
        transport: stdio
        command: python
        args:
          - "scripts/mock_mcp_server.py"
          - "compute"
          - "--location"
          - "CLOUD"
        env: {}


# ============================================================================
# Static Mapping
# ============================================================================
# Tool → 기본 Location 매핑
#
# Scheduler는 이 매핑을 기본값으로 사용하되,
# 향후 Phase 2에서는 호출 인자(args) 기반으로 동적 결정 가능

static_mapping:
  filesystem: DEVICE    # 기본적으로 DEVICE에서 실행
  slack: CLOUD          # Cloud API 필수
  credentials: DEVICE   # Privacy → 로컬 우선
  compute: CLOUD        # GPU 연산 → Cloud 선호
