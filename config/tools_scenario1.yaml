# EdgeAgent Tool Configuration - Scenario 1: Code Review Pipeline
#
# Tool Chain: filesystem → git → summarize → data_aggregate → filesystem
# Locations:  DEVICE     → DEVICE → EDGE    → EDGE           → DEVICE
#
# Use Case: Analyze local Git repository changes and generate code review report

tools:
  # filesystem: 파일시스템 접근 (DEVICE에서 파일 읽기/쓰기)
  filesystem:
    profile:
      description: "Read, write, and search files on the filesystem"
      data_affinity: DEVICE
      compute_intensity: LOW
      data_flow: EXPANSION
      reduction_ratio: 10.0
      requires_cloud_api: false
      privacy_sensitive: true
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      DEVICE:
        transport: stdio
        command: mcp-server-filesystem
        args:
          - "/tmp/edgeagent_device"
        env: {}

  # git: Git 저장소 분석 (DEVICE에서 로컬 저장소 접근)
  git:
    profile:
      description: "Git repository operations - diff, log, status, blame"
      data_affinity: DEVICE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.1
      requires_cloud_api: false
      privacy_sensitive: true
      wasi_compatible: false
      requires_gpu: false

    endpoints:
      DEVICE:
        transport: stdio
        command: mcp-server-git
        args:
          - "--repository"
          - "/tmp/edgeagent_device/repo"
        env: {}

  # summarize: 텍스트 요약 (EDGE에서 처리, Cloud API 사용)
  summarize:
    profile:
      description: "Summarize text using LLM (OpenAI/Upstage)"
      data_affinity: EDGE
      compute_intensity: MEDIUM
      data_flow: REDUCTION
      reduction_ratio: 0.2
      requires_cloud_api: false  # API call is internal, not a constraint
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "servers/summarize_server.py"
        env:
          SUMMARIZE_PROVIDER: "${SUMMARIZE_PROVIDER:-openai}"
          OPENAI_API_KEY: "${OPENAI_API_KEY}"

  # data_aggregate: 데이터 집계 및 병합
  data_aggregate:
    profile:
      description: "Aggregate, merge, and summarize structured data"
      data_affinity: EDGE
      compute_intensity: LOW
      data_flow: REDUCTION
      reduction_ratio: 0.1
      requires_cloud_api: false
      privacy_sensitive: false
      wasi_compatible: true
      requires_gpu: false

    endpoints:
      EDGE:
        transport: stdio
        command: python
        args:
          - "servers/data_aggregate_server.py"
        env: {}


static_mapping:
  filesystem: DEVICE
  git: DEVICE
  summarize: EDGE
  data_aggregate: EDGE
